

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Formatted I/O &mdash; yggdrasil v1.6.4 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Server/Client I/O" href="server_client_io.html" />
    <link rel="prev" title="Getting started" href="getting_started.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> yggdrasil
          

          
          </a>

          
            
            
              <div class="version">
                v1.6.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="includeme.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Formatted I/O</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#scalars">Scalars</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tables-by-row">Tables by Row</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tables-as-arrays">Tables as Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tables-as-pandas-data-frames">Tables as Pandas Data Frames</a></li>
<li class="toctree-l2"><a class="reference internal" href="#d-structures-as-ply-obj">3D Structures as Ply/Obj</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id1">Tables as Pandas Data Frames</a></li>
<li class="toctree-l2"><a class="reference internal" href="#config-style-mappings">Config style Mappings</a></li>
<li class="toctree-l2"><a class="reference internal" href="#json-files">JSON Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#yaml-files">YAML Files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="server_client_io.html">Server/Client I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="autowrap.html">Autowrapping Model Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="conditional_io.html">Conditional I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="transformed_io.html">Transformed I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="timesync_io.html">Timestep Synchronization</a></li>
<li class="toctree-l1"><a class="reference internal" href="yaml.html">YAML Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="units.html">Units</a></li>
<li class="toctree-l1"><a class="reference internal" href="c_format_strings.html">C-Style Format Strings</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="threading.html">OpenMP Threading in Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_toc.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced/index.html">Advanced</a></li>
<li class="toctree-l1"><a class="reference internal" href="development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="hackathon2018/index.html">Welcome to the 2018 Crops in Silico Hackathon!</a></li>
<li class="toctree-l1"><a class="reference internal" href="hackathon2019/index.html">Welcome to the 2019 Crops in Silico Hackathon!</a></li>
<li class="toctree-l1"><a class="reference internal" href="hackathon2021/index.html">Welcome to the 2021 Crops in Silico Hackathon!</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">yggdrasil</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Formatted I/O</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/formatted_io.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="formatted-i-o">
<span id="formatted-io-rst"></span><h1>Formatted I/O<a class="headerlink" href="#formatted-i-o" title="Permalink to this headline">¶</a></h1>
<p>In addition to passing raw strings, the yggdrasil framework also has
support for formatting/processing messages from/to language native objects.</p>
<div class="section" id="scalars">
<h2>Scalars<a class="headerlink" href="#scalars" title="Permalink to this headline">¶</a></h2>
<p>The format of messages containing scalar variables (strings, integers, and
floating point numbers) can be specified using a C-style format string
(See <a class="reference internal" href="c_format_strings.html#c-style-format-strings-rst"><span class="std std-ref">C-Style Format Strings</span></a> for details). In
the example below, the format string <code class="docutils literal notranslate"><span class="pre">&quot;%6s\t%d\t%f\n&quot;</span></code> indicates that each
message will contain a 6 character string, an integer, and a float. In addition
to providing a format string, the C API requires the use of different functions
for initializing channels and sending/receiving to/from them.</p>
<p>Model Code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># Import classes for input/output channels</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">yggdrasil.interface.YggInterface</span> <span class="kn">import</span> <span class="n">YggInput</span><span class="p">,</span> <span class="n">YggOutput</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1"># Initialize input/output channels</span>
<span class="linenos"> 5</span><span class="n">in_channel</span> <span class="o">=</span> <span class="n">YggInput</span><span class="p">(</span><span class="s1">&#39;inputA&#39;</span><span class="p">)</span>
<span class="linenos"> 6</span><span class="n">out_channel</span> <span class="o">=</span> <span class="n">YggOutput</span><span class="p">(</span><span class="s1">&#39;outputA&#39;</span><span class="p">)</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="c1"># Loop until there is no longer input or the queues are closed</span>
<span class="linenos"> 9</span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos">10</span>
<span class="linenos">11</span>    <span class="c1"># Receive input from input channel</span>
<span class="linenos">12</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">13</span>    <span class="n">flag</span><span class="p">,</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">in_channel</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
<span class="linenos">14</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">15</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Model A: No more input.&quot;</span><span class="p">)</span>
<span class="linenos">16</span>        <span class="k">break</span>
<span class="linenos">17</span>
<span class="linenos">18</span>    <span class="c1"># Print received message</span>
<span class="linenos">19</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Model A: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">msg</span><span class="p">)</span>
<span class="linenos">20</span>
<span class="linenos">21</span>    <span class="c1"># Send output to output channel</span>
<span class="linenos">22</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">23</span>    <span class="n">flag</span> <span class="o">=</span> <span class="n">out_channel</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="linenos">24</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">25</span>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Model A: Error sending output.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># Import classes for input/output channels</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">yggdrasil.interface.YggInterface</span> <span class="kn">import</span> <span class="n">YggInput</span><span class="p">,</span> <span class="n">YggOutput</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1"># Initialize input/output channels</span>
<span class="linenos"> 5</span><span class="n">in_channel</span> <span class="o">=</span> <span class="n">YggInput</span><span class="p">(</span><span class="s1">&#39;inputB&#39;</span><span class="p">)</span>
<span class="linenos"> 6</span><span class="n">out_channel</span> <span class="o">=</span> <span class="n">YggOutput</span><span class="p">(</span><span class="s1">&#39;outputB&#39;</span><span class="p">)</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="c1"># Loop until there is no longer input or the queues are closed</span>
<span class="linenos"> 9</span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos">10</span>
<span class="linenos">11</span>    <span class="c1"># Receive input from input channel</span>
<span class="linenos">12</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">13</span>    <span class="n">flag</span><span class="p">,</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">in_channel</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
<span class="linenos">14</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">15</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Model B: No more input.&quot;</span><span class="p">)</span>
<span class="linenos">16</span>        <span class="k">break</span>
<span class="linenos">17</span>
<span class="linenos">18</span>    <span class="c1"># Print received message</span>
<span class="linenos">19</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Model B: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">msg</span><span class="p">)</span>
<span class="linenos">20</span>
<span class="linenos">21</span>    <span class="c1"># Send output to output channel</span>
<span class="linenos">22</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">23</span>    <span class="n">flag</span> <span class="o">=</span> <span class="n">out_channel</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="linenos">24</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">25</span>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Model B: Error sending output.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href="examples/formatted_io1.html">Example in other languages</a>)</p>
<p>The same YAML can be used as was used for the example from
<a class="reference internal" href="getting_started.html#getting-started-rst"><span class="std std-ref">Getting started</span></a> with the modification that
the files are now read/written line-by-line (<code class="docutils literal notranslate"><span class="pre">filetype:</span> <span class="pre">ascii</span></code>)
rather than all at once:</p>
<p>Model YAML:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="nt">models</span><span class="p">:</span>
<span class="linenos"> 2</span>  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python_modelA</span>
<span class="linenos"> 3</span>    <span class="nt">language</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="linenos"> 4</span>    <span class="nt">args</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./src/formatted_io1_modelA.py</span>
<span class="linenos"> 5</span>    <span class="nt">inputs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputA</span>
<span class="linenos"> 6</span>    <span class="nt">outputs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputA</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span>  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python_modelB</span>
<span class="linenos"> 9</span>    <span class="nt">language</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="linenos">10</span>    <span class="nt">args</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./src/formatted_io1_modelB.py</span>
<span class="linenos">11</span>    <span class="nt">inputs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputB</span>
<span class="linenos">12</span>    <span class="nt">outputs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputB</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="nt">connections</span><span class="p">:</span>
<span class="linenos">15</span>  <span class="p p-Indicator">-</span> <span class="nt">input</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputA</span>  <span class="c1"># Connection between model A output &amp; model B input</span>
<span class="linenos">16</span>    <span class="nt">output</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputB</span>
<span class="linenos">17</span>  <span class="p p-Indicator">-</span> <span class="nt">input</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./Input/input.txt</span>  <span class="c1"># Connection between file and model A input</span>
<span class="linenos">18</span>    <span class="nt">output</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputA</span>
<span class="linenos">19</span>    <span class="nt">filetype</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ascii</span>
<span class="linenos">20</span>  <span class="p p-Indicator">-</span> <span class="nt">input</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputB</span>  <span class="c1"># Connection between model B output and file</span>
<span class="linenos">21</span>    <span class="nt">output</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./output.txt</span>
<span class="linenos">22</span>    <span class="nt">filetype</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ascii</span>
</pre></div>
</div>
<p>(<a class="reference external" href="examples/formatted_io1.html">Example in other languages</a>)</p>
</div>
<div class="section" id="tables-by-row">
<h2>Tables by Row<a class="headerlink" href="#tables-by-row" title="Permalink to this headline">¶</a></h2>
<p>Tables can also be passed in a similar manner. For input from a table, the format
string does not need to be provided and will be determined by the source of the
table. There are different API classes/functions for I/O from/to table channels
versus standard channels in each language. (e.g. <code class="docutils literal notranslate"><span class="pre">YggInput</span></code> vs.
<code class="docutils literal notranslate"><span class="pre">YggAsciiTableInput</span></code> in Python)</p>
<p>Model Code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># Import classes for input/output channels</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">yggdrasil.interface.YggInterface</span> <span class="kn">import</span> <span class="p">(</span>
<span class="linenos"> 3</span>    <span class="n">YggAsciiTableInput</span><span class="p">,</span> <span class="n">YggAsciiTableOutput</span><span class="p">)</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="c1"># Initialize input/output channels</span>
<span class="linenos"> 6</span><span class="n">in_channel</span> <span class="o">=</span> <span class="n">YggAsciiTableInput</span><span class="p">(</span><span class="s1">&#39;inputA&#39;</span><span class="p">)</span>
<span class="linenos"> 7</span><span class="n">out_channel</span> <span class="o">=</span> <span class="n">YggAsciiTableOutput</span><span class="p">(</span><span class="s1">&#39;outputA&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%6s</span><span class="se">\t</span><span class="si">%d</span><span class="se">\t</span><span class="si">%f</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="c1"># Loop until there is no longer input or the queues are closed</span>
<span class="linenos">10</span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos">11</span>
<span class="linenos">12</span>    <span class="c1"># Receive input from input channel</span>
<span class="linenos">13</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">14</span>    <span class="n">flag</span><span class="p">,</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">in_channel</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
<span class="linenos">15</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">16</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Model A: No more input.&quot;</span><span class="p">)</span>
<span class="linenos">17</span>        <span class="k">break</span>
<span class="linenos">18</span>    <span class="n">name</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="n">msg</span>
<span class="linenos">19</span>
<span class="linenos">20</span>    <span class="c1"># Print received message</span>
<span class="linenos">21</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Model A: </span><span class="si">%s</span><span class="s1">, </span><span class="si">%d</span><span class="s1">, </span><span class="si">%f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">size</span><span class="p">))</span>
<span class="linenos">22</span>
<span class="linenos">23</span>    <span class="c1"># Send output to output channel</span>
<span class="linenos">24</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">25</span>    <span class="n">flag</span> <span class="o">=</span> <span class="n">out_channel</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
<span class="linenos">26</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">27</span>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Model A: Error sending output.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># Import classes for input/output channels</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">yggdrasil.interface.YggInterface</span> <span class="kn">import</span> <span class="p">(</span>
<span class="linenos"> 3</span>    <span class="n">YggAsciiTableInput</span><span class="p">,</span> <span class="n">YggAsciiTableOutput</span><span class="p">)</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="c1"># Initialize input/output channels</span>
<span class="linenos"> 6</span><span class="n">in_channel</span> <span class="o">=</span> <span class="n">YggAsciiTableInput</span><span class="p">(</span><span class="s1">&#39;inputB&#39;</span><span class="p">)</span>
<span class="linenos"> 7</span><span class="n">out_channel</span> <span class="o">=</span> <span class="n">YggAsciiTableOutput</span><span class="p">(</span><span class="s1">&#39;outputB&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%6s</span><span class="se">\t</span><span class="si">%d</span><span class="se">\t</span><span class="si">%f</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="c1"># Loop until there is no longer input or the queues are closed</span>
<span class="linenos">10</span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos">11</span>
<span class="linenos">12</span>    <span class="c1"># Receive input from input channel</span>
<span class="linenos">13</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">14</span>    <span class="n">flag</span><span class="p">,</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">in_channel</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
<span class="linenos">15</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">16</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Model B: No more input.&quot;</span><span class="p">)</span>
<span class="linenos">17</span>        <span class="k">break</span>
<span class="linenos">18</span>    <span class="n">name</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="n">msg</span>
<span class="linenos">19</span>
<span class="linenos">20</span>    <span class="c1"># Print received message</span>
<span class="linenos">21</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Model B: </span><span class="si">%s</span><span class="s1">, </span><span class="si">%d</span><span class="s1">, </span><span class="si">%f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">size</span><span class="p">))</span>
<span class="linenos">22</span>
<span class="linenos">23</span>    <span class="c1"># Send output to output channel</span>
<span class="linenos">24</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">25</span>    <span class="n">flag</span> <span class="o">=</span> <span class="n">out_channel</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
<span class="linenos">26</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">27</span>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Model B: Error sending output.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href="examples/formatted_io2.html">Example in other languages</a>)</p>
<p>The <code class="docutils literal notranslate"><span class="pre">filetype:</span> <span class="pre">table</span></code> options in the YAML tell the
yggdrasil framework that the file should be read/written as a table
row-by-row including verification that each row conforms with the table.</p>
<p>Model YAML:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="nt">models</span><span class="p">:</span>
<span class="linenos"> 2</span>  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python_modelA</span>
<span class="linenos"> 3</span>    <span class="nt">language</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="linenos"> 4</span>    <span class="nt">args</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./src/formatted_io2_modelA.py</span>
<span class="linenos"> 5</span>    <span class="nt">inputs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputA</span>
<span class="linenos"> 6</span>    <span class="nt">outputs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputA</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span>  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python_modelB</span>
<span class="linenos"> 9</span>    <span class="nt">language</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="linenos">10</span>    <span class="nt">args</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./src/formatted_io2_modelB.py</span>
<span class="linenos">11</span>    <span class="nt">inputs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputB</span>
<span class="linenos">12</span>    <span class="nt">outputs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputB</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="nt">connections</span><span class="p">:</span>
<span class="linenos">15</span>  <span class="p p-Indicator">-</span> <span class="nt">input</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputA</span>  <span class="c1"># Connection between model A output &amp; model B input</span>
<span class="linenos">16</span>    <span class="nt">output</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputB</span>
<span class="linenos">17</span>  <span class="p p-Indicator">-</span> <span class="nt">input</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./Input/input.txt</span>  <span class="c1"># Connection between file and model A input</span>
<span class="linenos">18</span>    <span class="nt">output</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputA</span>
<span class="linenos">19</span>    <span class="nt">filetype</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">table</span>
<span class="linenos">20</span>  <span class="p p-Indicator">-</span> <span class="nt">input</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputB</span>  <span class="c1"># Connection between model B output and file</span>
<span class="linenos">21</span>    <span class="nt">output</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./output.txt</span>
<span class="linenos">22</span>    <span class="nt">filetype</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">table</span>
</pre></div>
</div>
<p>(<a class="reference external" href="examples/formatted_io2.html">Example in other languages</a>)</p>
</div>
<div class="section" id="tables-as-arrays">
<h2>Tables as Arrays<a class="headerlink" href="#tables-as-arrays" title="Permalink to this headline">¶</a></h2>
<p>Tables can also be passed as arrays. In Python and Matlab, this is done using
separate classes/functions. In C and C++, this is done by passing 1 to the <code class="docutils literal notranslate"><span class="pre">as_array</span></code>
arguments of the table API classes/functions.</p>
<p>Model Code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># Import classes for input/output channels</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">yggdrasil.interface.YggInterface</span> <span class="kn">import</span> <span class="p">(</span>
<span class="linenos"> 3</span>    <span class="n">YggAsciiArrayInput</span><span class="p">,</span> <span class="n">YggAsciiArrayOutput</span><span class="p">)</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="c1"># Initialize input/output channels</span>
<span class="linenos"> 6</span><span class="n">in_channel</span> <span class="o">=</span> <span class="n">YggAsciiArrayInput</span><span class="p">(</span><span class="s1">&#39;inputA&#39;</span><span class="p">)</span>
<span class="linenos"> 7</span><span class="n">out_channel</span> <span class="o">=</span> <span class="n">YggAsciiArrayOutput</span><span class="p">(</span><span class="s1">&#39;outputA&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%6s</span><span class="se">\t</span><span class="si">%d</span><span class="se">\t</span><span class="si">%f</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="c1"># Loop until there is no longer input or the queues are closed</span>
<span class="linenos">10</span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos">11</span>
<span class="linenos">12</span>    <span class="c1"># Receive input from input channel</span>
<span class="linenos">13</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">14</span>    <span class="n">flag</span><span class="p">,</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">in_channel</span><span class="o">.</span><span class="n">recv_array</span><span class="p">()</span>
<span class="linenos">15</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">16</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Model A: No more input.&quot;</span><span class="p">)</span>
<span class="linenos">17</span>        <span class="k">break</span>
<span class="linenos">18</span>
<span class="linenos">19</span>    <span class="c1"># Print received message</span>
<span class="linenos">20</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Model A: (</span><span class="si">%d</span><span class="s1"> rows)&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">))</span>
<span class="linenos">21</span>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)):</span>
<span class="linenos">22</span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;   </span><span class="si">%s</span><span class="s1">, </span><span class="si">%d</span><span class="s1">, </span><span class="si">%f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
<span class="linenos">23</span>
<span class="linenos">24</span>    <span class="c1"># Send output to output channel</span>
<span class="linenos">25</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">26</span>    <span class="n">flag</span> <span class="o">=</span> <span class="n">out_channel</span><span class="o">.</span><span class="n">send_array</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
<span class="linenos">27</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">28</span>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Model A: Error sending output.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># Import classes for input/output channels</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">yggdrasil.interface.YggInterface</span> <span class="kn">import</span> <span class="p">(</span>
<span class="linenos"> 3</span>    <span class="n">YggAsciiArrayInput</span><span class="p">,</span> <span class="n">YggAsciiArrayOutput</span><span class="p">)</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="c1"># Initialize input/output channels</span>
<span class="linenos"> 6</span><span class="n">in_channel</span> <span class="o">=</span> <span class="n">YggAsciiArrayInput</span><span class="p">(</span><span class="s1">&#39;inputB&#39;</span><span class="p">)</span>
<span class="linenos"> 7</span><span class="n">out_channel</span> <span class="o">=</span> <span class="n">YggAsciiArrayOutput</span><span class="p">(</span><span class="s1">&#39;outputB&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%6s</span><span class="se">\t</span><span class="si">%d</span><span class="se">\t</span><span class="si">%f</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="c1"># Loop until there is no longer input or the queues are closed</span>
<span class="linenos">10</span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos">11</span>
<span class="linenos">12</span>    <span class="c1"># Receive input from input channel</span>
<span class="linenos">13</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">14</span>    <span class="n">flag</span><span class="p">,</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">in_channel</span><span class="o">.</span><span class="n">recv_array</span><span class="p">()</span>
<span class="linenos">15</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">16</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Model B: No more input.&quot;</span><span class="p">)</span>
<span class="linenos">17</span>        <span class="k">break</span>
<span class="linenos">18</span>
<span class="linenos">19</span>    <span class="c1"># Print received message</span>
<span class="linenos">20</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Model B: (</span><span class="si">%d</span><span class="s1"> rows)&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">))</span>
<span class="linenos">21</span>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)):</span>
<span class="linenos">22</span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;   </span><span class="si">%s</span><span class="s1">, </span><span class="si">%d</span><span class="s1">, </span><span class="si">%f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
<span class="linenos">23</span>
<span class="linenos">24</span>    <span class="c1"># Send output to output channel</span>
<span class="linenos">25</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">26</span>    <span class="n">flag</span> <span class="o">=</span> <span class="n">out_channel</span><span class="o">.</span><span class="n">send_array</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
<span class="linenos">27</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">28</span>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Model B: Error sending output.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href="examples/formatted_io3.html">Example in other languages</a>)</p>
<p>The YAML only differs in that <code class="docutils literal notranslate"><span class="pre">as_array:</span> <span class="pre">True</span></code> for the connections to the files
to indicate that the files should be interpreted as tables and that the tables
should be read/written in their entirety as arrays.</p>
<p>Model YAML:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="nt">models</span><span class="p">:</span>
<span class="linenos"> 2</span>  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python_modelA</span>
<span class="linenos"> 3</span>    <span class="nt">language</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="linenos"> 4</span>    <span class="nt">args</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./src/formatted_io3_modelA.py</span>
<span class="linenos"> 5</span>    <span class="nt">inputs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputA</span>
<span class="linenos"> 6</span>    <span class="nt">outputs</span><span class="p">:</span>
<span class="linenos"> 7</span>      <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputA</span>
<span class="linenos"> 8</span>      <span class="nt">field_names</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">name,count,size</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span>  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python_modelB</span>
<span class="linenos">11</span>    <span class="nt">language</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="linenos">12</span>    <span class="nt">args</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./src/formatted_io3_modelB.py</span>
<span class="linenos">13</span>    <span class="nt">inputs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputB</span>
<span class="linenos">14</span>    <span class="nt">outputs</span><span class="p">:</span>
<span class="linenos">15</span>      <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputB</span>
<span class="linenos">16</span>      <span class="nt">field_names</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">name,count,size</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="nt">connections</span><span class="p">:</span>
<span class="linenos">19</span>  <span class="p p-Indicator">-</span> <span class="nt">input</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputA</span>  <span class="c1"># Connection between model A output &amp; model B input</span>
<span class="linenos">20</span>    <span class="nt">output</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputB</span>
<span class="linenos">21</span>  <span class="p p-Indicator">-</span> <span class="nt">input</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./Input/input.txt</span>  <span class="c1"># Connection between file and model A input</span>
<span class="linenos">22</span>    <span class="nt">output</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputA</span>
<span class="linenos">23</span>    <span class="nt">as_array</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="linenos">24</span>    <span class="nt">filetype</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">table</span>
<span class="linenos">25</span>  <span class="p p-Indicator">-</span> <span class="nt">input</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputB</span>  <span class="c1"># Connection between model B output and file</span>
<span class="linenos">26</span>    <span class="nt">output</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./output.txt</span>
<span class="linenos">27</span>    <span class="nt">as_array</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="linenos">28</span>    <span class="nt">filetype</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">table</span>
</pre></div>
</div>
<p>(<a class="reference external" href="examples/formatted_io3.html">Example in other languages</a>)</p>
</div>
<div class="section" id="tables-as-pandas-data-frames">
<h2>Tables as Pandas Data Frames<a class="headerlink" href="#tables-as-pandas-data-frames" title="Permalink to this headline">¶</a></h2>
<p>In Python, tables can also be passed as <a class="reference external" href="https://pandas.pydata.org/">Pandas</a>
data frames.</p>
<p>Model Code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># Import classes for input/output channels</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">yggdrasil.interface.YggInterface</span> <span class="kn">import</span> <span class="p">(</span>
<span class="linenos"> 3</span>    <span class="n">YggPandasInput</span><span class="p">,</span> <span class="n">YggPandasOutput</span><span class="p">)</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="c1"># Initialize input/output channels</span>
<span class="linenos"> 6</span><span class="n">in_channel</span> <span class="o">=</span> <span class="n">YggPandasInput</span><span class="p">(</span><span class="s1">&#39;inputA&#39;</span><span class="p">)</span>
<span class="linenos"> 7</span><span class="n">out_channel</span> <span class="o">=</span> <span class="n">YggPandasOutput</span><span class="p">(</span><span class="s1">&#39;outputA&#39;</span><span class="p">)</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="c1"># Loop until there is no longer input or the queues are closed</span>
<span class="linenos">10</span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos">11</span>
<span class="linenos">12</span>    <span class="c1"># Receive input from input channel</span>
<span class="linenos">13</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">14</span>    <span class="n">flag</span><span class="p">,</span> <span class="n">frame</span> <span class="o">=</span> <span class="n">in_channel</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
<span class="linenos">15</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">16</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Model A: No more input.&quot;</span><span class="p">)</span>
<span class="linenos">17</span>        <span class="k">break</span>
<span class="linenos">18</span>
<span class="linenos">19</span>    <span class="c1"># Print received message</span>
<span class="linenos">20</span>    <span class="n">nrows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="linenos">21</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Model A: (</span><span class="si">%d</span><span class="s1"> rows)&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">index</span><span class="p">))</span>
<span class="linenos">22</span>    <span class="nb">print</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
<span class="linenos">23</span>
<span class="linenos">24</span>    <span class="c1"># Send output to output channel</span>
<span class="linenos">25</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">26</span>    <span class="n">flag</span> <span class="o">=</span> <span class="n">out_channel</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
<span class="linenos">27</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">28</span>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Model A: Error sending output.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># Import classes for input/output channels</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">yggdrasil.interface.YggInterface</span> <span class="kn">import</span> <span class="p">(</span>
<span class="linenos"> 3</span>    <span class="n">YggPandasInput</span><span class="p">,</span> <span class="n">YggPandasOutput</span><span class="p">)</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="c1"># Initialize input/output channels</span>
<span class="linenos"> 6</span><span class="n">in_channel</span> <span class="o">=</span> <span class="n">YggPandasInput</span><span class="p">(</span><span class="s1">&#39;inputB&#39;</span><span class="p">)</span>
<span class="linenos"> 7</span><span class="n">out_channel</span> <span class="o">=</span> <span class="n">YggPandasOutput</span><span class="p">(</span><span class="s1">&#39;outputB&#39;</span><span class="p">)</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="c1"># Loop until there is no longer input or the queues are closed</span>
<span class="linenos">10</span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos">11</span>
<span class="linenos">12</span>    <span class="c1"># Receive input from input channel</span>
<span class="linenos">13</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">14</span>    <span class="n">flag</span><span class="p">,</span> <span class="n">frame</span> <span class="o">=</span> <span class="n">in_channel</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
<span class="linenos">15</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">16</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Model B: No more input.&quot;</span><span class="p">)</span>
<span class="linenos">17</span>        <span class="k">break</span>
<span class="linenos">18</span>
<span class="linenos">19</span>    <span class="c1"># Print received message</span>
<span class="linenos">20</span>    <span class="n">nrows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="linenos">21</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Model B: (</span><span class="si">%d</span><span class="s1"> rows)&#39;</span> <span class="o">%</span> <span class="n">nrows</span><span class="p">)</span>
<span class="linenos">22</span>    <span class="nb">print</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
<span class="linenos">23</span>
<span class="linenos">24</span>    <span class="c1"># Send output to output channel</span>
<span class="linenos">25</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">26</span>    <span class="n">flag</span> <span class="o">=</span> <span class="n">out_channel</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
<span class="linenos">27</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">28</span>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Model B: Error sending output.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href="examples/formatted_io4.html">Example in other languages</a>)</p>
<p>The YAML specifies <code class="docutils literal notranslate"><span class="pre">filetype:</span> <span class="pre">pandas</span></code> for the
connections to files to indicate that the files should be interpreted as CSV
tables using Pandas.</p>
<p>Model YAML:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="nt">models</span><span class="p">:</span>
<span class="linenos"> 2</span>  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python_modelA</span>
<span class="linenos"> 3</span>    <span class="nt">language</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="linenos"> 4</span>    <span class="nt">args</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./src/formatted_io4_modelA.py</span>
<span class="linenos"> 5</span>    <span class="nt">inputs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputA</span>
<span class="linenos"> 6</span>    <span class="nt">outputs</span><span class="p">:</span>
<span class="linenos"> 7</span>      <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputA</span>
<span class="linenos"> 8</span>      <span class="nt">field_names</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">name,count,size</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span>  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python_modelB</span>
<span class="linenos">11</span>    <span class="nt">language</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="linenos">12</span>    <span class="nt">args</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./src/formatted_io4_modelB.py</span>
<span class="linenos">13</span>    <span class="nt">inputs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputB</span>
<span class="linenos">14</span>    <span class="nt">outputs</span><span class="p">:</span>
<span class="linenos">15</span>      <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputB</span>
<span class="linenos">16</span>      <span class="nt">field_names</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">name,count,size</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="nt">connections</span><span class="p">:</span>
<span class="linenos">19</span>  <span class="p p-Indicator">-</span> <span class="nt">input</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputA</span>  <span class="c1"># Connection between model A output &amp; model B input</span>
<span class="linenos">20</span>    <span class="nt">output</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputB</span>
<span class="linenos">21</span>  <span class="p p-Indicator">-</span> <span class="nt">input</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./Input/input.txt</span>  <span class="c1"># Connection between file and model A input</span>
<span class="linenos">22</span>    <span class="nt">output</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputA</span>
<span class="linenos">23</span>    <span class="nt">filetype</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pandas</span>
<span class="linenos">24</span>  <span class="p p-Indicator">-</span> <span class="nt">input</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputB</span>  <span class="c1"># Connection between model B output and file</span>
<span class="linenos">25</span>    <span class="nt">output</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./output.txt</span>
<span class="linenos">26</span>    <span class="nt">filetype</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pandas</span>
</pre></div>
</div>
<p>(<a class="reference external" href="examples/formatted_io4.html">Example in other languages</a>)</p>
<p>As Pandas data frames are a Python specific construction, they cannot be
used within models written in other languages. However, the files can
still be read using Pandas. The data format returned to models on the
receiving end of sent Pandas data frames will receive arrays in the
proper native data type. In addition, a model written in Python can
receive any array sent by another model (whether or not it is Python)
as a Pandas data frame.</p>
</div>
<div class="section" id="d-structures-as-ply-obj">
<h2>3D Structures as Ply/Obj<a class="headerlink" href="#d-structures-as-ply-obj" title="Permalink to this headline">¶</a></h2>
<p>3D structures can be passed around in <a class="reference external" href="http://paulbourke.net/dataformats/ply/">Ply</a>
or <a class="reference external" href="http://paulbourke.net/dataformats/obj/">Obj</a> formats.</p>
<p>Model Code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">pprint</span>
<span class="linenos"> 2</span><span class="c1"># Import classes for input/output channels</span>
<span class="linenos"> 3</span><span class="kn">from</span> <span class="nn">yggdrasil.interface.YggInterface</span> <span class="kn">import</span> <span class="p">(</span>
<span class="linenos"> 4</span>    <span class="n">YggPlyInput</span><span class="p">,</span> <span class="n">YggPlyOutput</span><span class="p">)</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="c1"># Initialize input/output channels</span>
<span class="linenos"> 7</span><span class="n">in_channel</span> <span class="o">=</span> <span class="n">YggPlyInput</span><span class="p">(</span><span class="s1">&#39;inputA&#39;</span><span class="p">)</span>
<span class="linenos"> 8</span><span class="n">out_channel</span> <span class="o">=</span> <span class="n">YggPlyOutput</span><span class="p">(</span><span class="s1">&#39;outputA&#39;</span><span class="p">)</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="c1"># Loop until there is no longer input or the queues are closed</span>
<span class="linenos">11</span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos">12</span>
<span class="linenos">13</span>    <span class="c1"># Receive input from input channel</span>
<span class="linenos">14</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">15</span>    <span class="n">flag</span><span class="p">,</span> <span class="n">ply</span> <span class="o">=</span> <span class="n">in_channel</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
<span class="linenos">16</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">17</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Model A: No more input.&quot;</span><span class="p">)</span>
<span class="linenos">18</span>        <span class="k">break</span>
<span class="linenos">19</span>
<span class="linenos">20</span>    <span class="c1"># Print received message</span>
<span class="linenos">21</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Model A: (</span><span class="si">%d</span><span class="s1"> verts, </span><span class="si">%d</span><span class="s1"> faces)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ply</span><span class="o">.</span><span class="n">nvert</span><span class="p">,</span> <span class="n">ply</span><span class="o">.</span><span class="n">nface</span><span class="p">))</span>
<span class="linenos">22</span>    <span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">ply</span><span class="p">)</span>
<span class="linenos">23</span>
<span class="linenos">24</span>    <span class="c1"># Send output to output channel</span>
<span class="linenos">25</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">26</span>    <span class="n">flag</span> <span class="o">=</span> <span class="n">out_channel</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">ply</span><span class="p">)</span>
<span class="linenos">27</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">28</span>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Model A: Error sending output.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">pprint</span>
<span class="linenos"> 2</span><span class="c1"># Import classes for input/output channels</span>
<span class="linenos"> 3</span><span class="kn">from</span> <span class="nn">yggdrasil.interface.YggInterface</span> <span class="kn">import</span> <span class="p">(</span>
<span class="linenos"> 4</span>    <span class="n">YggPlyInput</span><span class="p">,</span> <span class="n">YggPlyOutput</span><span class="p">)</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="c1"># Initialize input/output channels</span>
<span class="linenos"> 7</span><span class="n">in_channel</span> <span class="o">=</span> <span class="n">YggPlyInput</span><span class="p">(</span><span class="s1">&#39;inputB&#39;</span><span class="p">)</span>
<span class="linenos"> 8</span><span class="n">out_channel</span> <span class="o">=</span> <span class="n">YggPlyOutput</span><span class="p">(</span><span class="s1">&#39;outputB&#39;</span><span class="p">)</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="c1"># Loop until there is no longer input or the queues are closed</span>
<span class="linenos">11</span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos">12</span>
<span class="linenos">13</span>    <span class="c1"># Receive input from input channel</span>
<span class="linenos">14</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">15</span>    <span class="n">flag</span><span class="p">,</span> <span class="n">ply</span> <span class="o">=</span> <span class="n">in_channel</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
<span class="linenos">16</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">17</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Model B: No more input.&quot;</span><span class="p">)</span>
<span class="linenos">18</span>        <span class="k">break</span>
<span class="linenos">19</span>
<span class="linenos">20</span>    <span class="c1"># Print received message</span>
<span class="linenos">21</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Model B: (</span><span class="si">%d</span><span class="s1"> verts, </span><span class="si">%d</span><span class="s1"> faces)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ply</span><span class="o">.</span><span class="n">nvert</span><span class="p">,</span> <span class="n">ply</span><span class="o">.</span><span class="n">nface</span><span class="p">))</span>
<span class="linenos">22</span>    <span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">ply</span><span class="p">)</span>
<span class="linenos">23</span>
<span class="linenos">24</span>    <span class="c1"># Send output to output channel</span>
<span class="linenos">25</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">26</span>    <span class="n">flag</span> <span class="o">=</span> <span class="n">out_channel</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">ply</span><span class="p">)</span>
<span class="linenos">27</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">28</span>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Model B: Error sending output.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href="examples/formatted_io5.html">Example in other languages</a>)</p>
<p>The YAML specifies <code class="docutils literal notranslate"><span class="pre">filetype:</span> <span class="pre">ply</span></code> (<code class="docutils literal notranslate"><span class="pre">filetype:</span> <span class="pre">obj</span></code> for Obj) for the
connections to files to indicate that the files should be interpreted as
Ply/Obj file formats.</p>
<p>Model YAML:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="nt">models</span><span class="p">:</span>
<span class="linenos"> 2</span>  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python_modelA</span>
<span class="linenos"> 3</span>    <span class="nt">language</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="linenos"> 4</span>    <span class="nt">args</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./src/formatted_io5_modelA.py</span>
<span class="linenos"> 5</span>    <span class="nt">inputs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputA</span>
<span class="linenos"> 6</span>    <span class="nt">outputs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputA</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span>  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python_modelB</span>
<span class="linenos"> 9</span>    <span class="nt">language</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="linenos">10</span>    <span class="nt">args</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./src/formatted_io5_modelB.py</span>
<span class="linenos">11</span>    <span class="nt">inputs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputB</span>
<span class="linenos">12</span>    <span class="nt">outputs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputB</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="nt">connections</span><span class="p">:</span>
<span class="linenos">15</span>  <span class="p p-Indicator">-</span> <span class="nt">input</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputA</span>  <span class="c1"># Connection between model A output &amp; model B input</span>
<span class="linenos">16</span>    <span class="nt">output</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputB</span>
<span class="linenos">17</span>  <span class="p p-Indicator">-</span> <span class="nt">input</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./Input/input.ply</span>  <span class="c1"># Connection between file and model A input</span>
<span class="linenos">18</span>    <span class="nt">output</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputA</span>
<span class="linenos">19</span>    <span class="nt">filetype</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ply</span>
<span class="linenos">20</span>  <span class="p p-Indicator">-</span> <span class="nt">input</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputB</span>  <span class="c1"># Connection between model B output and file</span>
<span class="linenos">21</span>    <span class="nt">output</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./output.ply</span>
<span class="linenos">22</span>    <span class="nt">filetype</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ply</span>
</pre></div>
</div>
<p>(<a class="reference external" href="examples/formatted_io5.html">Example in other languages</a>)</p>
<p>In Python the data is returned as a dictionary subclass
(<code class="xref py py-class docutils literal notranslate"><span class="pre">yggdrasil.serialize.PlySerialize.PlyDict</span></code> or
<code class="xref py py-class docutils literal notranslate"><span class="pre">yggdrasil.serialize.ObjSerialize.ObjDict</span></code>) while in
C/C++ it is returned as a structure (<code class="xref c c-type docutils literal notranslate"><span class="pre">ply_t</span></code> or <code class="xref c c-type docutils literal notranslate"><span class="pre">obj_t</span></code>).</p>
</div>
<div class="section" id="id1">
<h2>Tables as Pandas Data Frames<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>In Python, tables can also be passed as <a class="reference external" href="https://pandas.pydata.org/">Pandas</a>
data frames.</p>
<p>Model Code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># Import classes for input/output channels</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">yggdrasil.interface.YggInterface</span> <span class="kn">import</span> <span class="p">(</span>
<span class="linenos"> 3</span>    <span class="n">YggPandasInput</span><span class="p">,</span> <span class="n">YggPandasOutput</span><span class="p">)</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="c1"># Initialize input/output channels</span>
<span class="linenos"> 6</span><span class="n">in_channel</span> <span class="o">=</span> <span class="n">YggPandasInput</span><span class="p">(</span><span class="s1">&#39;inputA&#39;</span><span class="p">)</span>
<span class="linenos"> 7</span><span class="n">out_channel</span> <span class="o">=</span> <span class="n">YggPandasOutput</span><span class="p">(</span><span class="s1">&#39;outputA&#39;</span><span class="p">)</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="c1"># Loop until there is no longer input or the queues are closed</span>
<span class="linenos">10</span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos">11</span>
<span class="linenos">12</span>    <span class="c1"># Receive input from input channel</span>
<span class="linenos">13</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">14</span>    <span class="n">flag</span><span class="p">,</span> <span class="n">frame</span> <span class="o">=</span> <span class="n">in_channel</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
<span class="linenos">15</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">16</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Model A: No more input.&quot;</span><span class="p">)</span>
<span class="linenos">17</span>        <span class="k">break</span>
<span class="linenos">18</span>
<span class="linenos">19</span>    <span class="c1"># Print received message</span>
<span class="linenos">20</span>    <span class="n">nrows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="linenos">21</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Model A: (</span><span class="si">%d</span><span class="s1"> rows)&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">index</span><span class="p">))</span>
<span class="linenos">22</span>    <span class="nb">print</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
<span class="linenos">23</span>
<span class="linenos">24</span>    <span class="c1"># Send output to output channel</span>
<span class="linenos">25</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">26</span>    <span class="n">flag</span> <span class="o">=</span> <span class="n">out_channel</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
<span class="linenos">27</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">28</span>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Model A: Error sending output.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># Import classes for input/output channels</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">yggdrasil.interface.YggInterface</span> <span class="kn">import</span> <span class="p">(</span>
<span class="linenos"> 3</span>    <span class="n">YggPandasInput</span><span class="p">,</span> <span class="n">YggPandasOutput</span><span class="p">)</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="c1"># Initialize input/output channels</span>
<span class="linenos"> 6</span><span class="n">in_channel</span> <span class="o">=</span> <span class="n">YggPandasInput</span><span class="p">(</span><span class="s1">&#39;inputB&#39;</span><span class="p">)</span>
<span class="linenos"> 7</span><span class="n">out_channel</span> <span class="o">=</span> <span class="n">YggPandasOutput</span><span class="p">(</span><span class="s1">&#39;outputB&#39;</span><span class="p">)</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="c1"># Loop until there is no longer input or the queues are closed</span>
<span class="linenos">10</span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos">11</span>
<span class="linenos">12</span>    <span class="c1"># Receive input from input channel</span>
<span class="linenos">13</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">14</span>    <span class="n">flag</span><span class="p">,</span> <span class="n">frame</span> <span class="o">=</span> <span class="n">in_channel</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
<span class="linenos">15</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">16</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Model B: No more input.&quot;</span><span class="p">)</span>
<span class="linenos">17</span>        <span class="k">break</span>
<span class="linenos">18</span>
<span class="linenos">19</span>    <span class="c1"># Print received message</span>
<span class="linenos">20</span>    <span class="n">nrows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="linenos">21</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Model B: (</span><span class="si">%d</span><span class="s1"> rows)&#39;</span> <span class="o">%</span> <span class="n">nrows</span><span class="p">)</span>
<span class="linenos">22</span>    <span class="nb">print</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
<span class="linenos">23</span>
<span class="linenos">24</span>    <span class="c1"># Send output to output channel</span>
<span class="linenos">25</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">26</span>    <span class="n">flag</span> <span class="o">=</span> <span class="n">out_channel</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
<span class="linenos">27</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">28</span>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Model B: Error sending output.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href="examples/formatted_io4.html">Example in other languages</a>)</p>
<p>The YAML specifies <code class="docutils literal notranslate"><span class="pre">filetype:</span> <span class="pre">pandas</span></code> for the
connections to files to indicate that the files should be interpreted as CSV
tables using Pandas.</p>
<p>Model YAML:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="nt">models</span><span class="p">:</span>
<span class="linenos"> 2</span>  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python_modelA</span>
<span class="linenos"> 3</span>    <span class="nt">language</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="linenos"> 4</span>    <span class="nt">args</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./src/formatted_io4_modelA.py</span>
<span class="linenos"> 5</span>    <span class="nt">inputs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputA</span>
<span class="linenos"> 6</span>    <span class="nt">outputs</span><span class="p">:</span>
<span class="linenos"> 7</span>      <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputA</span>
<span class="linenos"> 8</span>      <span class="nt">field_names</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">name,count,size</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span>  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python_modelB</span>
<span class="linenos">11</span>    <span class="nt">language</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="linenos">12</span>    <span class="nt">args</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./src/formatted_io4_modelB.py</span>
<span class="linenos">13</span>    <span class="nt">inputs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputB</span>
<span class="linenos">14</span>    <span class="nt">outputs</span><span class="p">:</span>
<span class="linenos">15</span>      <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputB</span>
<span class="linenos">16</span>      <span class="nt">field_names</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">name,count,size</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="nt">connections</span><span class="p">:</span>
<span class="linenos">19</span>  <span class="p p-Indicator">-</span> <span class="nt">input</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputA</span>  <span class="c1"># Connection between model A output &amp; model B input</span>
<span class="linenos">20</span>    <span class="nt">output</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputB</span>
<span class="linenos">21</span>  <span class="p p-Indicator">-</span> <span class="nt">input</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./Input/input.txt</span>  <span class="c1"># Connection between file and model A input</span>
<span class="linenos">22</span>    <span class="nt">output</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputA</span>
<span class="linenos">23</span>    <span class="nt">filetype</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pandas</span>
<span class="linenos">24</span>  <span class="p p-Indicator">-</span> <span class="nt">input</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputB</span>  <span class="c1"># Connection between model B output and file</span>
<span class="linenos">25</span>    <span class="nt">output</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./output.txt</span>
<span class="linenos">26</span>    <span class="nt">filetype</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pandas</span>
</pre></div>
</div>
<p>(<a class="reference external" href="examples/formatted_io4.html">Example in other languages</a>)</p>
<p>As Pandas data frames are a Python specific construction, they cannot be
used within models written in other languages. However, the files can
still be read using Pandas. The data format returned to models on the
receiving end of sent Pandas data frames will receive arrays in the
proper native data type. In addition, a model written in Python can
receive any array sent by another model (whether or not it is Python)
as a Pandas data frame.</p>
</div>
<div class="section" id="config-style-mappings">
<h2>Config style Mappings<a class="headerlink" href="#config-style-mappings" title="Permalink to this headline">¶</a></h2>
<p>Simple mapping (key/value) data can be passed around in a colon/tab
delimited format.</p>
<p>Model Code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># Import classes for input/output channels</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">yggdrasil.interface.YggInterface</span> <span class="kn">import</span> <span class="n">YggInput</span><span class="p">,</span> <span class="n">YggOutput</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1"># Initialize input/output channels</span>
<span class="linenos"> 5</span><span class="n">in_channel</span> <span class="o">=</span> <span class="n">YggInput</span><span class="p">(</span><span class="s1">&#39;inputA&#39;</span><span class="p">)</span>
<span class="linenos"> 6</span><span class="n">out_channel</span> <span class="o">=</span> <span class="n">YggOutput</span><span class="p">(</span><span class="s1">&#39;outputA&#39;</span><span class="p">)</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="c1"># Loop until there is no longer input or the queues are closed</span>
<span class="linenos"> 9</span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos">10</span>
<span class="linenos">11</span>    <span class="c1"># Receive input from input channel</span>
<span class="linenos">12</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">13</span>    <span class="n">flag</span><span class="p">,</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">in_channel</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
<span class="linenos">14</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">15</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Model A: No more input.&quot;</span><span class="p">)</span>
<span class="linenos">16</span>        <span class="k">break</span>
<span class="linenos">17</span>
<span class="linenos">18</span>    <span class="c1"># Print received message</span>
<span class="linenos">19</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Model A: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span>
<span class="linenos">20</span>
<span class="linenos">21</span>    <span class="c1"># Send output to output channel</span>
<span class="linenos">22</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">23</span>    <span class="n">flag</span> <span class="o">=</span> <span class="n">out_channel</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="linenos">24</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">25</span>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Model A: Error sending output.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># Import classes for input/output channels</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">yggdrasil.interface.YggInterface</span> <span class="kn">import</span> <span class="n">YggInput</span><span class="p">,</span> <span class="n">YggOutput</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1"># Initialize input/output channels</span>
<span class="linenos"> 5</span><span class="n">in_channel</span> <span class="o">=</span> <span class="n">YggInput</span><span class="p">(</span><span class="s1">&#39;inputB&#39;</span><span class="p">)</span>
<span class="linenos"> 6</span><span class="n">out_channel</span> <span class="o">=</span> <span class="n">YggOutput</span><span class="p">(</span><span class="s1">&#39;outputB&#39;</span><span class="p">)</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="c1"># Loop until there is no longer input or the queues are closed</span>
<span class="linenos"> 9</span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos">10</span>
<span class="linenos">11</span>    <span class="c1"># Receive input from input channel</span>
<span class="linenos">12</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">13</span>    <span class="n">flag</span><span class="p">,</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">in_channel</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
<span class="linenos">14</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">15</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Model B: No more input.&quot;</span><span class="p">)</span>
<span class="linenos">16</span>        <span class="k">break</span>
<span class="linenos">17</span>
<span class="linenos">18</span>    <span class="c1"># Print received message</span>
<span class="linenos">19</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Model B: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span>
<span class="linenos">20</span>
<span class="linenos">21</span>    <span class="c1"># Send output to output channel</span>
<span class="linenos">22</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">23</span>    <span class="n">flag</span> <span class="o">=</span> <span class="n">out_channel</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="linenos">24</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">25</span>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Model B: Error sending output.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href="examples/formatted_io7.html">Example in other languages</a>)</p>
<p>The YAML specifies <code class="docutils literal notranslate"><span class="pre">filetype:</span> <span class="pre">map</span></code> for the
connections to files to indicate that the files should be interpreted as
config file formats with single, unique keys on each line followed by a
delimiter and then a value.</p>
<p>Model YAML:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="nt">models</span><span class="p">:</span>
<span class="linenos"> 2</span>  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python_modelA</span>
<span class="linenos"> 3</span>    <span class="nt">language</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="linenos"> 4</span>    <span class="nt">args</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./src/formatted_io7_modelA.py</span>
<span class="linenos"> 5</span>    <span class="nt">inputs</span><span class="p">:</span>
<span class="linenos"> 6</span>      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputA</span>
<span class="linenos"> 7</span>        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">object</span>
<span class="linenos"> 8</span>    <span class="nt">outputs</span><span class="p">:</span>
<span class="linenos"> 9</span>      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputA</span>
<span class="linenos">10</span>        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">object</span>
<span class="linenos">11</span>
<span class="linenos">12</span>  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python_modelB</span>
<span class="linenos">13</span>    <span class="nt">language</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="linenos">14</span>    <span class="nt">args</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./src/formatted_io7_modelB.py</span>
<span class="linenos">15</span>    <span class="nt">inputs</span><span class="p">:</span>
<span class="linenos">16</span>      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputB</span>
<span class="linenos">17</span>        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">object</span>
<span class="linenos">18</span>    <span class="nt">outputs</span><span class="p">:</span>
<span class="linenos">19</span>      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputB</span>
<span class="linenos">20</span>        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">object</span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="nt">connections</span><span class="p">:</span>
<span class="linenos">23</span>  <span class="p p-Indicator">-</span> <span class="nt">input</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputA</span>  <span class="c1"># Connection between model A output &amp; model B input</span>
<span class="linenos">24</span>    <span class="nt">output</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputB</span>
<span class="linenos">25</span>  <span class="p p-Indicator">-</span> <span class="nt">input</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./Input/input.txt</span>  <span class="c1"># Connection between file and model A input</span>
<span class="linenos">26</span>    <span class="nt">output</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputA</span>
<span class="linenos">27</span>    <span class="nt">filetype</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">map</span>
<span class="linenos">28</span>  <span class="p p-Indicator">-</span> <span class="nt">input</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputB</span>  <span class="c1"># Connection between model B output and file</span>
<span class="linenos">29</span>    <span class="nt">output</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./output.txt</span>
<span class="linenos">30</span>    <span class="nt">filetype</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">map</span>
</pre></div>
</div>
<p>(<a class="reference external" href="examples/formatted_io7.html">Example in other languages</a>)</p>
<p>In Python the data is returned as a dictionary with one key/value for each
line in the file.</p>
</div>
<div class="section" id="json-files">
<h2>JSON Files<a class="headerlink" href="#json-files" title="Permalink to this headline">¶</a></h2>
<p>More complex nested structures can be passed around using JSON serialization.</p>
<p>Model Code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># Import classes for input/output channels</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">yggdrasil.interface.YggInterface</span> <span class="kn">import</span> <span class="n">YggInput</span><span class="p">,</span> <span class="n">YggOutput</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1"># Initialize input/output channels</span>
<span class="linenos"> 5</span><span class="n">in_channel</span> <span class="o">=</span> <span class="n">YggInput</span><span class="p">(</span><span class="s1">&#39;inputA&#39;</span><span class="p">)</span>
<span class="linenos"> 6</span><span class="n">out_channel</span> <span class="o">=</span> <span class="n">YggOutput</span><span class="p">(</span><span class="s1">&#39;outputA&#39;</span><span class="p">)</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="c1"># Loop until there is no longer input or the queues are closed</span>
<span class="linenos"> 9</span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos">10</span>
<span class="linenos">11</span>    <span class="c1"># Receive input from input channel</span>
<span class="linenos">12</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">13</span>    <span class="n">flag</span><span class="p">,</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">in_channel</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
<span class="linenos">14</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">15</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Model A: No more input.&quot;</span><span class="p">)</span>
<span class="linenos">16</span>        <span class="k">break</span>
<span class="linenos">17</span>
<span class="linenos">18</span>    <span class="c1"># Print received message</span>
<span class="linenos">19</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Model A: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span>
<span class="linenos">20</span>
<span class="linenos">21</span>    <span class="c1"># Send output to output channel</span>
<span class="linenos">22</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">23</span>    <span class="n">flag</span> <span class="o">=</span> <span class="n">out_channel</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="linenos">24</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">25</span>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Model A: Error sending output.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># Import classes for input/output channels</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">yggdrasil.interface.YggInterface</span> <span class="kn">import</span> <span class="n">YggInput</span><span class="p">,</span> <span class="n">YggOutput</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1"># Initialize input/output channels</span>
<span class="linenos"> 5</span><span class="n">in_channel</span> <span class="o">=</span> <span class="n">YggInput</span><span class="p">(</span><span class="s1">&#39;inputB&#39;</span><span class="p">)</span>
<span class="linenos"> 6</span><span class="n">out_channel</span> <span class="o">=</span> <span class="n">YggOutput</span><span class="p">(</span><span class="s1">&#39;outputB&#39;</span><span class="p">)</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="c1"># Loop until there is no longer input or the queues are closed</span>
<span class="linenos"> 9</span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos">10</span>
<span class="linenos">11</span>    <span class="c1"># Receive input from input channel</span>
<span class="linenos">12</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">13</span>    <span class="n">flag</span><span class="p">,</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">in_channel</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
<span class="linenos">14</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">15</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Model B: No more input.&quot;</span><span class="p">)</span>
<span class="linenos">16</span>        <span class="k">break</span>
<span class="linenos">17</span>
<span class="linenos">18</span>    <span class="c1"># Print received message</span>
<span class="linenos">19</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Model B: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span>
<span class="linenos">20</span>
<span class="linenos">21</span>    <span class="c1"># Send output to output channel</span>
<span class="linenos">22</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">23</span>    <span class="n">flag</span> <span class="o">=</span> <span class="n">out_channel</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="linenos">24</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">25</span>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Model B: Error sending output.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href="examples/formatted_io8.html">Example in other languages</a>)</p>
<p>The YAML specifies <code class="docutils literal notranslate"><span class="pre">filetype:</span> <span class="pre">json</span></code> for the
connections to files to indicate that the files should be interpreted as
JSON files.</p>
<p>Model YAML:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="nt">models</span><span class="p">:</span>
<span class="linenos"> 2</span>  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python_modelA</span>
<span class="linenos"> 3</span>    <span class="nt">language</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="linenos"> 4</span>    <span class="nt">args</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./src/formatted_io8_modelA.py</span>
<span class="linenos"> 5</span>    <span class="nt">inputs</span><span class="p">:</span>
<span class="linenos"> 6</span>      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputA</span>
<span class="linenos"> 7</span>        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">object</span>
<span class="linenos"> 8</span>    <span class="nt">outputs</span><span class="p">:</span>
<span class="linenos"> 9</span>      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputA</span>
<span class="linenos">10</span>        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">object</span>
<span class="linenos">11</span>
<span class="linenos">12</span>  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python_modelB</span>
<span class="linenos">13</span>    <span class="nt">language</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="linenos">14</span>    <span class="nt">args</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./src/formatted_io8_modelB.py</span>
<span class="linenos">15</span>    <span class="nt">inputs</span><span class="p">:</span>
<span class="linenos">16</span>      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputB</span>
<span class="linenos">17</span>        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">object</span>
<span class="linenos">18</span>    <span class="nt">outputs</span><span class="p">:</span>
<span class="linenos">19</span>      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputB</span>
<span class="linenos">20</span>        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">object</span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="nt">connections</span><span class="p">:</span>
<span class="linenos">23</span>  <span class="p p-Indicator">-</span> <span class="nt">input</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputA</span>  <span class="c1"># Connection between model A output &amp; model B input</span>
<span class="linenos">24</span>    <span class="nt">output</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputB</span>
<span class="linenos">25</span>  <span class="p p-Indicator">-</span> <span class="nt">input</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./Input/input.txt</span>  <span class="c1"># Connection between file and model A input</span>
<span class="linenos">26</span>    <span class="nt">output</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputA</span>
<span class="linenos">27</span>    <span class="nt">filetype</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">json</span>
<span class="linenos">28</span>  <span class="p p-Indicator">-</span> <span class="nt">input</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputB</span>  <span class="c1"># Connection between model B output and file</span>
<span class="linenos">29</span>    <span class="nt">output</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./output.txt</span>
<span class="linenos">30</span>    <span class="nt">filetype</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">json</span>
</pre></div>
</div>
<p>(<a class="reference external" href="examples/formatted_io8.html">Example in other languages</a>)</p>
<p>In Python, the data is returned in the type determined by the
<a class="reference external" href="https://docs.python.org/3/library/json.html">json</a> package.</p>
</div>
<div class="section" id="yaml-files">
<h2>YAML Files<a class="headerlink" href="#yaml-files" title="Permalink to this headline">¶</a></h2>
<p>More complex nested structures can also be represented using the YAML syntax.</p>
<p>Model Code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># Import classes for input/output channels</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">yggdrasil.interface.YggInterface</span> <span class="kn">import</span> <span class="n">YggInput</span><span class="p">,</span> <span class="n">YggOutput</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1"># Initialize input/output channels</span>
<span class="linenos"> 5</span><span class="n">in_channel</span> <span class="o">=</span> <span class="n">YggInput</span><span class="p">(</span><span class="s1">&#39;inputA&#39;</span><span class="p">)</span>
<span class="linenos"> 6</span><span class="n">out_channel</span> <span class="o">=</span> <span class="n">YggOutput</span><span class="p">(</span><span class="s1">&#39;outputA&#39;</span><span class="p">)</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="c1"># Loop until there is no longer input or the queues are closed</span>
<span class="linenos"> 9</span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos">10</span>
<span class="linenos">11</span>    <span class="c1"># Receive input from input channel</span>
<span class="linenos">12</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">13</span>    <span class="n">flag</span><span class="p">,</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">in_channel</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
<span class="linenos">14</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">15</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Model A: No more input.&quot;</span><span class="p">)</span>
<span class="linenos">16</span>        <span class="k">break</span>
<span class="linenos">17</span>
<span class="linenos">18</span>    <span class="c1"># Print received message</span>
<span class="linenos">19</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Model A: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span>
<span class="linenos">20</span>
<span class="linenos">21</span>    <span class="c1"># Send output to output channel</span>
<span class="linenos">22</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">23</span>    <span class="n">flag</span> <span class="o">=</span> <span class="n">out_channel</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="linenos">24</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">25</span>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Model A: Error sending output.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># Import classes for input/output channels</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">yggdrasil.interface.YggInterface</span> <span class="kn">import</span> <span class="n">YggInput</span><span class="p">,</span> <span class="n">YggOutput</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1"># Initialize input/output channels</span>
<span class="linenos"> 5</span><span class="n">in_channel</span> <span class="o">=</span> <span class="n">YggInput</span><span class="p">(</span><span class="s1">&#39;inputB&#39;</span><span class="p">)</span>
<span class="linenos"> 6</span><span class="n">out_channel</span> <span class="o">=</span> <span class="n">YggOutput</span><span class="p">(</span><span class="s1">&#39;outputB&#39;</span><span class="p">)</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="c1"># Loop until there is no longer input or the queues are closed</span>
<span class="linenos"> 9</span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="linenos">10</span>
<span class="linenos">11</span>    <span class="c1"># Receive input from input channel</span>
<span class="linenos">12</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">13</span>    <span class="n">flag</span><span class="p">,</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">in_channel</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
<span class="linenos">14</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">15</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Model B: No more input.&quot;</span><span class="p">)</span>
<span class="linenos">16</span>        <span class="k">break</span>
<span class="linenos">17</span>
<span class="linenos">18</span>    <span class="c1"># Print received message</span>
<span class="linenos">19</span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Model B: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span>
<span class="linenos">20</span>
<span class="linenos">21</span>    <span class="c1"># Send output to output channel</span>
<span class="linenos">22</span>    <span class="c1"># If there is an error, the flag will be False</span>
<span class="linenos">23</span>    <span class="n">flag</span> <span class="o">=</span> <span class="n">out_channel</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="linenos">24</span>    <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
<span class="linenos">25</span>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Model B: Error sending output.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href="examples/formatted_io9.html">Example in other languages</a>)</p>
<p>The YAML input file options specifies <code class="docutils literal notranslate"><span class="pre">filetype:</span> <span class="pre">yaml</span></code> for the
connections to files to indicate that the files should be interpreted as
YAML files.</p>
<p>Model YAML:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="nt">models</span><span class="p">:</span>
<span class="linenos"> 2</span>  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python_modelA</span>
<span class="linenos"> 3</span>    <span class="nt">language</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="linenos"> 4</span>    <span class="nt">args</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./src/formatted_io9_modelA.py</span>
<span class="linenos"> 5</span>    <span class="nt">inputs</span><span class="p">:</span>
<span class="linenos"> 6</span>      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputA</span>
<span class="linenos"> 7</span>        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">any</span>
<span class="linenos"> 8</span>    <span class="nt">outputs</span><span class="p">:</span>
<span class="linenos"> 9</span>      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputA</span>
<span class="linenos">10</span>        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">any</span>
<span class="linenos">11</span>
<span class="linenos">12</span>  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python_modelB</span>
<span class="linenos">13</span>    <span class="nt">language</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="linenos">14</span>    <span class="nt">args</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./src/formatted_io9_modelB.py</span>
<span class="linenos">15</span>    <span class="nt">inputs</span><span class="p">:</span>
<span class="linenos">16</span>      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputB</span>
<span class="linenos">17</span>        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">any</span>
<span class="linenos">18</span>    <span class="nt">outputs</span><span class="p">:</span>
<span class="linenos">19</span>      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputB</span>
<span class="linenos">20</span>        <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">any</span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="nt">connections</span><span class="p">:</span>
<span class="linenos">23</span>  <span class="p p-Indicator">-</span> <span class="nt">input</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputA</span>  <span class="c1"># Connection between model A output &amp; model B input</span>
<span class="linenos">24</span>    <span class="nt">output</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputB</span>
<span class="linenos">25</span>  <span class="p p-Indicator">-</span> <span class="nt">input</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./Input/input.txt</span>  <span class="c1"># Connection between file and model A input</span>
<span class="linenos">26</span>    <span class="nt">output</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">inputA</span>
<span class="linenos">27</span>    <span class="nt">filetype</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yaml</span>
<span class="linenos">28</span>  <span class="p p-Indicator">-</span> <span class="nt">input</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">outputB</span>  <span class="c1"># Connection between model B output and file</span>
<span class="linenos">29</span>    <span class="nt">output</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">./output.txt</span>
<span class="linenos">30</span>    <span class="nt">filetype</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yaml</span>
</pre></div>
</div>
<p>(<a class="reference external" href="examples/formatted_io9.html">Example in other languages</a>)</p>
<p>In Python, the data is returned in the type determined by the
<a class="reference external" href="https://pyyaml.org/wiki/PyYAMLDocumentation">PyYAML</a> package.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="server_client_io.html" class="btn btn-neutral float-right" title="Server/Client I/O" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="getting_started.html" class="btn btn-neutral float-left" title="Getting started" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2017, Meagan Lang, David Raila.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>