<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installation &mdash; yggdrasil v1.8.4 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Getting started" href="getting_started.html" />
    <link rel="prev" title="Overview" href="includeme.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> yggdrasil
          </a>
              <div class="version">
                v1.8.4
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="includeme.html">Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#conda-mamba-installation-recommended">Conda/Mamba Installation (recommended)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#development-installation">Development Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#manual-installation">Manual Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#user-defined-rapidjson">User Defined rapidjson</a></li>
<li class="toctree-l2"><a class="reference internal" href="#additional-steps-on-windows">Additional Steps on Windows</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installing-via-vcpkg">Installing via vcpkg</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-from-source">Building from Source</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#additional-steps-for-matlab-models">Additional Steps for Matlab Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="#additional-steps-for-r-models">Additional Steps for R Models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#rtools-windows-only">Rtools (Windows only)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#r-interpreter">R Interpreter</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#mac">Mac</a></li>
<li class="toctree-l4"><a class="reference internal" href="#linux">Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="#windows">Windows</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#r-dependencies">R Dependencies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#additional-steps-for-rabbitmq-message-passing">Additional Steps for RabbitMQ Message Passing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#additional-steps-for-opensimroot">Additional Steps for OpenSimRoot</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="formatted_io.html">Formatted I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="server_client_io.html">Server/Client I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="autowrap.html">Autowrapping Model Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="conditional_io.html">Conditional I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="transformed_io.html">Transformed I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="timesync_io.html">Timestep Synchronization</a></li>
<li class="toctree-l1"><a class="reference internal" href="yaml.html">YAML Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="units.html">Units</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line Interface (CLI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="hpc.html">High Performance Computing (HPC)</a></li>
<li class="toctree-l1"><a class="reference internal" href="remote.html">Running Integrations as Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker.html">Docker Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="c_format_strings.html">C-Style Format Strings</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="threading.html">OpenMP Threading in Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/examples_toc.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced/index.html">Advanced</a></li>
<li class="toctree-l1"><a class="reference internal" href="development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="hackathon2018/index.html">Welcome to the 2018 Crops in Silico Hackathon!</a></li>
<li class="toctree-l1"><a class="reference internal" href="hackathon2019/index.html">Welcome to the 2019 Crops in Silico Hackathon!</a></li>
<li class="toctree-l1"><a class="reference internal" href="hackathon2021/index.html">Welcome to the 2021 Crops in Silico Hackathon!</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">yggdrasil</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Installation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/install.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="installation">
<span id="install-rst"></span><h1>Installation<a class="headerlink" href="#installation" title="Permalink to this heading">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Windows Users</strong></p>
<p>If you will be running C/C++/Fortran models on a Windows operatoring system, you will first need to install Microsoft Visual Studio, regardless of the installation method you end up using. Visual Studio Community can be downloaded for free from <a class="reference external" href="https://visualstudio.microsoft.com/vs/community/">here</a>. During installation, we recommend selecting the components below. If you forget to add something during the initial download, you can always modify the installation via the “Visual Studio Installer” program.</p>
<blockquote>
<div><ul class="simple">
<li><p>“Desktop development with C++” - Workload under “Windows” section</p></li>
<li><p>“MSVC v140 - VS 2015 C++ build tools (v14.00)” - Individual component under “Compilers, build tools, and runtimes” section.</p></li>
</ul>
</div></blockquote>
<p>If you <em>do not use conda/mamba</em> to install yggdrasil, you will also need to initialize the command line build tools in any prompt you will be calling yggdrasil from. This can be done by calling yggdrasil from a “VS2015 x64 Native Tools Developer Command Prompt”, or by locating the <code class="docutils literal notranslate"><span class="pre">vsvarsall.bat</span></code> script that comes with Visual Studio. Information on the developer prompt and how to locate the <code class="docutils literal notranslate"><span class="pre">vsvarsall.bat</span></code> script can be found <a class="reference external" href="https://docs.microsoft.com/en-us/cpp/build/building-on-the-command-line?view=vs-2019">here</a>. The prompt/script used must enable the Visual Studio 2015 build tools (the specific year) to be compatible with the Python C library (see the discussion <a class="reference external" href="https://wiki.python.org/moin/WindowsCompilers">here</a>). The VS 2015 tools prompt/script will be installed from within Visual Studio 2019 by selecting the components indicated above. On a 64bit Windows machine (assuming you will be using 64 bit Python), the command to initialize these tools within a regular command prompt will look something like this, but the exact path will vary with your particular installation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ call &quot;C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\vcvarsall.bat&quot; amd64
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Mac Users</strong></p>
<p>If you will be running C/C++/Fortran models, you will need to install the command line developer tools on Mac which provides several utilities for compilation and code management (e.g. clang, gcc, make, git). <a class="reference external" href="https://cloudtechpoint.medium.com/how-to-install-command-line-tools-homebrew-in-macos-without-xcode-1b910742d923">This</a> article outlines how to check if they are installed and install them if they are not. It also describes how to install the Homebrew package manager, which will be useful for installing non-Python dependencies if you do not plan on using conda/mamba to install yggdrasil.</p>
</div>
<section id="conda-mamba-installation-recommended">
<h2>Conda/Mamba Installation (recommended)<a class="headerlink" href="#conda-mamba-installation-recommended" title="Permalink to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Mamba Installation</strong></p>
<p>Mamba is a drop in replacement for conda that is often faster and provides clearer error messages when there are conflicts. You can install mamba by following the instructions <a class="reference external" href="https://mamba.readthedocs.io/en/latest/installation.html">here</a> (including by using conda). Then you may just use <code class="docutils literal notranslate"><span class="pre">mamba</span></code> in place of any of the commands below.</p>
</div>
<p>Download and install Miniconda from <a class="reference external" href="https://docs.conda.io/en/latest/miniconda.html">here</a> (or Anaconda from <a class="reference external" href="https://www.anaconda.com/download/">here</a> if you would like additional Python libraries installed by default). There are conda distributions available for yggdrasil from <a class="reference external" href="https://github.com/conda-forge/yggdrasil-feedstock">conda-forge</a>. You can install yggdrasil from conda-forge by calling:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ conda install -c conda-forge yggdrasil
</pre></div>
</div>
<p>from your terminal prompt (or Anaconda prompt on Windows). This will
install yggdrasil and all of its dependencies in your active
conda environment from the <code class="docutils literal notranslate"><span class="pre">conda-forge</span></code> channel.</p>
<p>Although not required, we recommend permanently adding conda-forge to
the list of accepted channels by running the following command from
the terminal (or Anaconda Prompt on Windows).:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ conda config --add channels conda-forge
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Windows Users</strong> If you see the warning:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;WARNING: Did not find VS in registry or in VS140COMNTOOLS env var - your compiler may not work&quot;</span>
</pre></div>
</div>
<p>during installation you will need to run the command below to enable the Visual Studio command line tools.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ call &quot;C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\vcvarsall.bat&quot; amd64
</pre></div>
</div>
<p>Then run <code class="docutils literal notranslate"><span class="pre">yggconfig</span></code> to finish the installation process for C and C++.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If conda takes a very long time to install yggdrasil (&gt;5 min spent solving the environment) or fails with an error about conflicts and you are using a version of conda older than 4.7.2, try either updating conda, using mamba (see note above), and/or adding the conda-forge channel (if you havn’t already):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">config</span> <span class="o">--</span><span class="n">add</span> <span class="n">channels</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span>
</pre></div>
</div>
<p>and setting the channel priority to strict:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">config</span> <span class="o">--</span><span class="nb">set</span> <span class="n">channel_priority</span> <span class="n">strict</span>
</pre></div>
</div>
<p>See discussion <a class="reference external" href="https://github.com/conda/conda/issues/7690">here</a> for additional ideas on why conda might be hanging.</p>
</div>
</section>
<section id="development-installation">
<h2>Development Installation<a class="headerlink" href="#development-installation" title="Permalink to this heading">¶</a></h2>
<p>If you would like to contribute to yggdrasil, instructions on setting up a development environment can be found <a class="reference internal" href="development/general.html#dev-env-rst"><span class="std std-ref">here</span></a>.</p>
</section>
<section id="manual-installation">
<span id="manual-install-rst"></span><h2>Manual Installation<a class="headerlink" href="#manual-installation" title="Permalink to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Before installing yggdrasil from <code class="docutils literal notranslate"><span class="pre">pip</span></code> or the cloned repository, you
should manually install the non-Python dependencies, particularly the
ZeroMQ C and C++ libraries and R packages (see below).</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Windows Users</strong> Be warned that there is 260 character limit to the size of the <code class="docutils literal notranslate"><span class="pre">PATH</span></code> environment variable (see note <a class="reference external" href="https://docs.microsoft.com/en-us/windows/win32/fileio/naming-a-file#maximum-path-length-limitation">here</a>). If you modify the path (e.g. to add Python or the Python scripts directory), be sure that you do not exceed this limit. If you do, Windows will not report an error, but the characters past the limit will be ignored and so those directories will not be availble on the command prompt.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Windows Users</strong> If you do not use conda to install dependencies, we highly recommend installing two package managers, Chocolatey and vcpkg, to handle the installation of the non-Python dependencies. Instructions for installing Chocolatey can be found <a class="reference external" href="https://chocolatey.org/install">here</a> and instructions for installing vcpkg can be found <a class="reference external" href="https://github.com/microsoft/vcpkg">here</a>.</p>
</div>
<p>If you do not want to use conda, you can install Python yourself and then install
yggdrasil via <code class="docutils literal notranslate"><span class="pre">pip</span></code> or from the source code (See below). Python can be installed
in a number of ways, but be sure that you get Python&gt;=3.5. Installation methods include:</p>
<ul class="simple">
<li><p>Executable installer from the <a class="reference external" href="https://www.python.org/downloads/">Python Software Foundaction</a> (Recommended for Windows)</p></li>
<li><p>Package manager, e.g.
* <code class="docutils literal notranslate"><span class="pre">brew</span> <span class="pre">install</span> <span class="pre">python3</span></code> on Mac (be sure to include the 3)
* <code class="docutils literal notranslate"><span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">python</span></code> on Linux
* <code class="docutils literal notranslate"><span class="pre">choco</span> <span class="pre">install</span> <span class="pre">python3</span></code> on Windows</p></li>
<li><p><a class="reference external" href="https://visualstudio.microsoft.com/vs/features/python/">Microsoft Visual Studio</a></p></li>
<li><p><a class="reference external" href="https://www.microsoft.com/en-us/p/python-38/9mssztt1n39l?activetab=pivot:overviewtab">Microsoft Store</a> (Windows only; we do not recommend this method as it can be difficult to get working correctly as it requires tracking down the Scripts direcotry modifying the path yourself, see discussion <a class="reference external" href="https://dev.to/naruaika/why-i-didn-t-install-python-from-the-microsoft-store-5cbd">here</a>)</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Mac Users</strong> Python 2 is included on Mac as the default Python (as <code class="docutils literal notranslate"><span class="pre">python</span></code>), but <code class="docutils literal notranslate"><span class="pre">python3</span></code> is what you will want to use (Python 2 has been deprecated). If you have Mac OS Catalina, you will already have Python 3, but you may need to enable developer tools to use it. You can check to see if Python 3 is installed (or prompt the developer tool <a class="reference external" href="https://apple.stackexchange.com/questions/376077/is-usr-bin-python3-provided-with-macos-catalina">installation</a>) by running <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">--version</span></code> and <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">--version</span></code>. If these commands do not return the same version, you will need to be sure to always use <code class="docutils literal notranslate"><span class="pre">python3</span></code> and <code class="docutils literal notranslate"><span class="pre">pip3</span></code> during installation (as opposed to the versions of the executables without the <code class="docutils literal notranslate"><span class="pre">3</span></code>), or set Python 3 to be the default version of Python (see <a class="reference external" href="https://opensource.com/article/19/5/python-3-default-mac">this article</a>).</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Windows Users</strong> If you install Python, but your prompt cannot locate Python (i.e. <code class="docutils literal notranslate"><span class="pre">where</span> <span class="pre">python</span></code> fails), you may need to add the directory containing the Python executable (and the <code class="docutils literal notranslate"><span class="pre">Scripts</span></code> directory inside that as discussed below) to you <code class="docutils literal notranslate"><span class="pre">PATH</span></code> environment variable (e.g. <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">path=%path%;C:\path\to\Python\directory</span></code> or <code class="docutils literal notranslate"><span class="pre">setx</span> <span class="pre">path=%path%;C:\path\to\Python\directory</span></code> to make the change for new prompts). For more information on setting the path, including instruction on seting in via the GUI, see <a class="reference external" href="https://datatofish.com/add-python-to-windows-path/">this article</a>.</p>
</div>
<p>Once Python is installed, yggdrasil can be installed from the command line/prompt
from either <a class="reference external" href="https://pypi.org/project/yggdrasil-framework/">PyPI</a>
using <code class="docutils literal notranslate"><span class="pre">pip</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install yggdrasil-framework
</pre></div>
</div>
<p>or by cloning the <a class="reference external" href="https://git-scm.com/">Git</a> repository on
<a class="reference external" href="https://github.com/cropsinsilico/yggdrasil">Github</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone --recurse-submodules https://github.com/cropsinsilico/yggdrasil.git
</pre></div>
</div>
<p>and then building the distribution.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd yggdrasil
$ pip install .
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">--recurse-submodules</span></code> option was not included when cloning the repo,
you will need to run the following from within the repository before calling
<code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">install</span></code> to ensure that
<a class="reference external" href="http://rapidjson.org/">rapidjson</a> is cloned as a submodule:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git submodule init
$ git submodule update
</pre></div>
</div>
<p>If you do not have admin privileges on the target machine, <code class="docutils literal notranslate"><span class="pre">--user</span></code> can be
added to the end of either of the <code class="docutils literal notranslate"><span class="pre">pip</span></code> installation commands.
When using the <code class="docutils literal notranslate"><span class="pre">--user</span></code> flag, you may need to add the directory containing the
entry point scripts to your <code class="docutils literal notranslate"><span class="pre">PATH</span></code> environment variable in order to use
yggdrasil command line tools (e.g. <code class="docutils literal notranslate"><span class="pre">yggrun</span></code>) without specifying
their full path. Usually, this directory can be found using the following
Python commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">distutils.sysconfig</span> <span class="kn">import</span> <span class="n">get_python_lib</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">get_python_lib</span><span class="p">(),</span> <span class="s1">&#39;..&#39;</span><span class="p">,</span> <span class="s1">&#39;..&#39;</span><span class="p">,</span> <span class="s1">&#39;..&#39;</span><span class="p">,</span> <span class="s1">&#39;bin&#39;</span><span class="p">))</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><em>Windows Users</em> If you used the Windows store to install Python, the above commands will not yield the correct scripts directory. It will be something along the lines of <code class="docutils literal notranslate"><span class="pre">%userprofile%\AppData\Local\Packages\PythonSoftwareFoundation.Python.3.9_qbz5n2kfra8p0\LocalCache\local-packages\Python39\Scripts</span></code></p>
</div>
<p>The displayed path can then be added either on the command link or in a startup
script (e.g. <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> or <code class="docutils literal notranslate"><span class="pre">.bash_profile</span></code>), using one of the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ export PATH=$PATH:&lt;scripts_dir&gt;  # (linux/osx, bash)
$ setenv PATH $PATH:&lt;scripts_dir&gt;  # (linux/osx, tcsh)
$ set PATH=%PATH%:&lt;scripts_dir&gt;   # (windows)
</pre></div>
</div>
<p>These commands will only add the directory to your path for the current
session. For the change to be permanent on Linux/MacOS, the appropriate command
from above can be added to your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> or <code class="docutils literal notranslate"><span class="pre">.bash_profile</span></code>. On
Windows (&gt;=7), the following command will permanently modify your path:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ setx PATH=%PATH%:&lt;scripts_dir&gt;
</pre></div>
</div>
<p>The changes will take affect the next time you open the terminal.</p>
</section>
<section id="user-defined-rapidjson">
<h2>User Defined rapidjson<a class="headerlink" href="#user-defined-rapidjson" title="Permalink to this heading">¶</a></h2>
<p>If you would like to use an existing installation of the
<a class="reference external" href="http://rapidjson.org/">rapidjson</a>
header-only library, you can pass the flag
<code class="docutils literal notranslate"><span class="pre">--rapidjson-include-dir=&lt;user_defined_dir&gt;</span></code> to either of the <code class="docutils literal notranslate"><span class="pre">pip</span></code>
installation commands from above with the location of the
existing rapidjson include directory.</p>
</section>
<section id="additional-steps-on-windows">
<h2>Additional Steps on Windows<a class="headerlink" href="#additional-steps-on-windows" title="Permalink to this heading">¶</a></h2>
<p>As local communication on Windows is handled by ZeroMQ, running models written
in C or C++ will require installing the ZeroMQ libraries for C and C++.
If you install yggdrasil using conda, these will be installed
automatically as dependencies. If you are not using conda, you will need to
install them yourself.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Although not required, the ZeroMQ libraries are also recommended for message
passing on Linux and MacOS operating systems as the IPC V message queues
have default upper limits of 2048 bytes on some operating systems and will
have to send larger messages piecemeal, adding to the message passing
overhead. We recommend installing zeromq &amp; czmq via apt on Linux
(<code class="docutils literal notranslate"><span class="pre">apt-get</span> <span class="pre">libczmq-dev</span> <span class="pre">libzmq3-dev</span></code>) or Homebrew
on Mac (<code class="docutils literal notranslate"><span class="pre">brew</span> <span class="pre">install</span> <span class="pre">czmq</span> <span class="pre">zmq</span></code>) if you do not use conda.</p>
</div>
<section id="installing-via-vcpkg">
<h3>Installing via vcpkg<a class="headerlink" href="#installing-via-vcpkg" title="Permalink to this heading">¶</a></h3>
<p>You can install the ZeroMQ C and C++ libraries via vcpkg (instructions for
installing vcpkg found <a class="reference external" href="https://github.com/microsoft/vcpkg">here</a>. To
do so run the following from your “VS2015 x64 Native Tools Developer Command Prompt”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">vcpkg</span> <span class="n">install</span> <span class="n">czmq</span> <span class="n">zeromq</span> <span class="o">--</span><span class="n">triplet</span> <span class="n">x64</span><span class="o">-</span><span class="n">windows</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--triplet</span> <span class="pre">x64-windows</span></code> flag indicates a 64 bit version of Windows
(the most common). If you have a 32 bit Windows installation or are using a
32 bit version of Python, omit the flag.</p>
</div>
<p>When you run <code class="docutils literal notranslate"><span class="pre">yggconfig</span></code> following installation of yggdrasil
If you did not set the <code class="docutils literal notranslate"><span class="pre">VCPKG_ROOT</span></code> environment variable before installing vcpkg,
you will need to add a flag indicating the location of the vcpkg installation when
running <code class="docutils literal notranslate"><span class="pre">yggconfig</span></code> following installation of yggdrasil. e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">yggconfig</span> <span class="o">--</span><span class="n">vcpkg</span><span class="o">-</span><span class="nb">dir</span><span class="o">=</span><span class="n">C</span><span class="p">:</span>\<span class="n">path</span>\<span class="n">to</span>\<span class="n">vcpkg</span>\<span class="n">root</span>\<span class="n">directory</span>
</pre></div>
</div>
<p>If you do not do this, you will need to manually add the paths to the czmq and
zeromq libraries/headers to your yggdrasil configuration file (See
<a class="reference internal" href="config.html#config-rst"><span class="std std-ref">Configuration Options</span></a>).</p>
</section>
<section id="building-from-source">
<h3>Building from Source<a class="headerlink" href="#building-from-source" title="Permalink to this heading">¶</a></h3>
<p>Instructions for installing the ZeroMQ C and C++ libraries can be found
<a class="reference external" href="https://github.com/zeromq/czmq#building-and-installing">here</a>
At install (and any time <code class="docutils literal notranslate"><span class="pre">yggconfig</span></code> is called), yggdrasil will attempt
to search for those libraries in those directories specified by the <code class="docutils literal notranslate"><span class="pre">PATH</span></code>,
<code class="docutils literal notranslate"><span class="pre">INCLUDE</span></code>, and <code class="docutils literal notranslate"><span class="pre">LIB</span></code> environment variables. If yggdrasil complains
that it cannot find these libraries, you can manually set them in your
<code class="docutils literal notranslate"><span class="pre">.yggdrasil.cfg</span></code> file (See <a class="reference internal" href="config.html#config-rst"><span class="std std-ref">Configuration Options</span></a>).
If you install these libraries after installing yggdrasil you can re-configure
yggdrasil and have it search for the libraries again by calling <code class="docutils literal notranslate"><span class="pre">yggconfig</span></code>
from the command line or by setting the appropriate config options manually.</p>
</section>
</section>
<section id="additional-steps-for-matlab-models">
<h2>Additional Steps for Matlab Models<a class="headerlink" href="#additional-steps-for-matlab-models" title="Permalink to this heading">¶</a></h2>
<p>To run Matlab models, you will need an existing Matlab installation and license and
the <code class="docutils literal notranslate"><span class="pre">matlab</span></code> executable must be on your path (i.e. you can call <code class="docutils literal notranslate"><span class="pre">matlab</span></code>
from the command line and a Matlab interpreter will open). If not already available on
the command line, you can enable it by adding the location of the executable to
your path. The executable is usually located within a ‘bin’ directory within the
directory that Matlab was installed. On Linux/Mac operating systems, this is done
using the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ export PATH=$PATH:&lt;/PATH/TO/MATLAB/bin/&gt;
</pre></div>
</div>
<p>On Windows, this command should already be available.</p>
<p>While yggdrasil can now run Matlab models via the command line, it is still
recommended that you install the Matlab engine for Python if you will be running
Matlab models with yggdrasil frequently as using the engine reduces the time
added to model startup by starting Matlab.</p>
<p>yggdrasil will attempt to install the Matlab engine for Python at
install, but should it fail or if you want to use a non-default version of Matlab,
you can also do it manually. Instructions for installing the Matlab engine as a
Python package can be found on the
<a class="reference external" href="https://www.mathworks.com/help/matlab/matlab_external/install-the-matlab-engine-for-python.html">Mathworks website</a>. Once you have installed the Matlab engine as a python
package, you can re-configure yggdrasil by calling <code class="docutils literal notranslate"><span class="pre">yggconfig</span></code> from the command
line.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The version of Matlab that you are using will determine the versions of Python that you can use with yggdrasil. The chart below shows the versions of Python that are compatible with several versions of Matlab. If you are using an incompatible version, the instructions above for manually installing the Matlab engine as a Python package will fail with an error message indicating which versions of Python you can use.</p>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 38%" />
<col style="width: 62%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Matlab Version</p></th>
<th class="head"><p>Max Python Version</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>R2015b</p></td>
<td><p>2.7, 3.3, 3.4</p></td>
</tr>
<tr class="row-odd"><td><p>R2017a</p></td>
<td><p>2.7, 3.3, 3.4, 3.5</p></td>
</tr>
<tr class="row-even"><td><p>R2017b</p></td>
<td><p>2.7, 3.3, 3.4, 3.5, 3.6</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>yggdrasil cannot currently run Matlab models if Matlab is installed via a Citrix environment as yggdrasil needs command line access to the Matlab executable and access to the environment in which Matlab models are run.</p>
</div>
</section>
<section id="additional-steps-for-r-models">
<span id="install-r-rst"></span><h2>Additional Steps for R Models<a class="headerlink" href="#additional-steps-for-r-models" title="Permalink to this heading">¶</a></h2>
<section id="rtools-windows-only">
<h3>Rtools (Windows only)<a class="headerlink" href="#rtools-windows-only" title="Permalink to this heading">¶</a></h3>
<p>On Windows, if you do not install the R dependencies via conda, you will also need to install Rtools so that the R dependencies with C/C++/Fortran components can be compiled if they need to be installed from source. The Rtools installer and instructions for installing Rtools for R&lt;4.0.0 can be found <a class="reference external" href="https://cran.r-project.org/bin/windows/Rtools/history.html">here</a>. For R&gt;=4.0.0, you will need to install Rtools40 instead (installer/instructions <a class="reference external" href="https://cran.r-project.org/bin/windows/Rtools/">here</a>).</p>
</section>
<section id="r-interpreter">
<h3>R Interpreter<a class="headerlink" href="#r-interpreter" title="Permalink to this heading">¶</a></h3>
<p>To run R models, you will need to install the
<a class="reference external" href="https://www.r-project.org/">R interpreter</a> (we recommend R &gt;= 3.5). If you installed yggdrasil using conda, this will be installed for you, but if you are not using conda, you will need to install R yourself along with the <a class="reference external" href="https://www.unidata.ucar.edu/software/udunits/">udunits</a> package.</p>
<section id="mac">
<h4>Mac<a class="headerlink" href="#mac" title="Permalink to this heading">¶</a></h4>
<p>On Mac, this can be done via Homebrew:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ brew install r
$ brew install udunits
</pre></div>
</div>
</section>
<section id="linux">
<h4>Linux<a class="headerlink" href="#linux" title="Permalink to this heading">¶</a></h4>
<p>On Linux this can be done via apt. Installing R &gt;= 3.5 (recommended) requires first adding a source entry and key for your OS as shown below for for Xenial distribution of Ubuntu (Details on <a class="reference external" href="https://cloud.r-project.org/bin/linux/ubuntu/README.html">ubuntu</a>, <a class="reference external" href="https://cloud.r-project.org/bin/linux/debian/">debian</a>, <a class="reference external" href="https://cloud.r-project.org/bin/linux/redhat/README">redhat</a> installation):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo add-apt-repository &#39;deb https://cloud.r-project.org/bin/linux/ubuntu xenial-cran35/&#39;
$ sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E298A3A825C0D65DFD57CBB651716619E084DAB9
$ sudo apt update
$ sudo apt-get install r-base r-base-dev
$ sudo apt-get install libudunits2-dev
</pre></div>
</div>
<p>If you don’t want the latest version, you can install the default using the last two lines on Ubuntu and Debian.</p>
</section>
<section id="windows">
<h4>Windows<a class="headerlink" href="#windows" title="Permalink to this heading">¶</a></h4>
<p>On Windows, you will need to download and run the installer. Links to the R 3.6 installer and additoinal information about the installation process on Windows can be found <a class="reference external" href="https://cran.r-project.org/bin/windows/base/">here</a>.</p>
</section>
</section>
<section id="r-dependencies">
<h3>R Dependencies<a class="headerlink" href="#r-dependencies" title="Permalink to this heading">¶</a></h3>
<p>Even if you install the R interpreter yourself, yggdrasil will attempt to install the R dependencies it needs via <a class="reference external" href="https://cran.r-project.org/">CRAN</a> when it is installed. If this fails, you may need to install these yourself from within the R interpreter. yggdrasil’s R dependencies include <a class="reference external" href="https://blog.rstudio.com/2018/03/26/reticulate-r-interface-to-python/">reticulate</a> for calling Python from R, <a class="reference external" href="https://cran.r-project.org/web/packages/zeallot/index.html">zeallot</a> for allowing assignment of output to multiple variables, <a class="reference external" href="https://cran.r-project.org/web/packages/units/index.html">units</a> for tracking physical units in R, <a class="reference external" href="https://cran.r-project.org/web/packages/bit64/index.html">bit64</a> for 64bit integers, and <a class="reference external" href="https://cran.r-project.org/web/packages/R6/index.html">R6</a> for creating interface classes with teardown methods.</p>
<p>These packages can by installed from CRAN from the R interpreter.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">install</span><span class="o">.</span><span class="n">packages</span><span class="p">(</span><span class="s2">&quot;reticulate&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="n">install</span><span class="o">.</span><span class="n">packages</span><span class="p">(</span><span class="s2">&quot;zeallot&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="n">install</span><span class="o">.</span><span class="n">packages</span><span class="p">(</span><span class="s2">&quot;units&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="n">install</span><span class="o">.</span><span class="n">packages</span><span class="p">(</span><span class="s2">&quot;bit64&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="n">install</span><span class="o">.</span><span class="n">packages</span><span class="p">(</span><span class="s2">&quot;R6&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>[MAC ONLY] If you have compilation issues when installing R packages on MacOS, check to make sure that <code class="docutils literal notranslate"><span class="pre">which</span> <span class="pre">ar</span></code> returns the system default (<code class="docutils literal notranslate"><span class="pre">/usr/bin/ar</span></code>). If you have another version of <code class="docutils literal notranslate"><span class="pre">ar</span></code> installed (e.g. through homebrew’s binutils), it may cause conflicts.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>[MAC ONLY] If <code class="docutils literal notranslate"><span class="pre">install.packages(&quot;units&quot;)</span></code> fails with messages about the <code class="docutils literal notranslate"><span class="pre">udunits</span></code> library being missing and you installed <code class="docutils literal notranslate"><span class="pre">udunits</span></code> using homebrew as described above, then you can install the R <code class="docutils literal notranslate"><span class="pre">units</span></code> and point to the library by running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">install</span><span class="o">.</span><span class="n">packages</span><span class="p">(</span><span class="s2">&quot;units&quot;</span><span class="p">,</span> <span class="n">configure</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">c</span><span class="p">(</span><span class="s2">&quot;--with-udunits2-include=/usr/local/opt/udunits/include/&quot;</span><span class="p">,</span> <span class="s2">&quot;--with-udunits2-lib=/usr/local/opt/udunits/lib/&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>[MAC ONLY?] If any <code class="docutils literal notranslate"><span class="pre">install.packages</span></code> calls fail with errors that look like those shown below, add the <code class="docutils literal notranslate"><span class="pre">--no-multiarch</span></code> install option to those passed (e.g. <code class="docutils literal notranslate"><span class="pre">install.packages(&quot;R6&quot;,</span> <span class="pre">INSTALL_opts=c(&quot;--no-multiarch&quot;))</span></code>).:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>*** arch - R
*** arch - R.dSYM
ERROR: loading failed for ‘R’, ‘R.dSYM’
...
ERROR: sub-architecture &#39;R&#39; is not installed
ERROR: sub-architecture &#39;R.dSYM&#39; is not installed
</pre></div>
</div>
</div>
<p>If you install R and/or the R dependencies after installing yggdrasil, you can complete yggdrasil’s R installation by running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ygginstall R
</pre></div>
</div>
<p>from your terminal (Linux/Mac) or Anaconda prompt (Windows).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you see errors along the lines of <code class="docutils literal notranslate"><span class="pre">'lib</span> <span class="pre">=</span> <span class="pre">&quot;/usr/local/lib/R/site-library&quot;'</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">writable</span></code> when running <code class="docutils literal notranslate"><span class="pre">ygginstall</span> <span class="pre">R</span></code>, it is likely that the directory R is attempting to install in requires staff privileges to edit. On Unix systems (Linux/Mac), if you have <code class="docutils literal notranslate"><span class="pre">sudo</span></code> access you can either add yourself to the staff group (e.g. <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">usermod</span> <span class="pre">-a</span> <span class="pre">-G</span> <span class="pre">staff</span> <span class="pre">your_user_name</span></code>; then log off and back on) or add the <code class="docutils literal notranslate"><span class="pre">--sudoR</span></code> flag to the installation call (i.e. <code class="docutils literal notranslate"><span class="pre">ygginstall</span> <span class="pre">R</span> <span class="pre">--sudoR</span></code>). On windows, you can open R from an administrator prompt and install the dependencies from CRAN directly as shown above. If you do not have administrator access, you can pick a directory that you have write access to and add it to the list of paths checked by R for R libraries in your .Rprofile file (i.e. add <code class="docutils literal notranslate"><span class="pre">.libPaths(</span> <span class="pre">c(</span> <span class="pre">&quot;~/userLibrary&quot;</span> <span class="pre">,</span> <span class="pre">.libPaths()</span> <span class="pre">)</span> <span class="pre">)</span></code>). <a class="reference external" href="https://support.rstudio.com/hc/en-us/articles/360047157094-Managing-R-with-Rprofile-Renviron-Rprofile-site-Renviron-site-rsession-conf-and-repos-conf">This article</a> describes what the .Rprofile file is and how to locate it. <a class="reference external" href="https://www.accelebrate.com/library/how-to-articles/r-rstudio-library">This article</a> discusses this in the context of Rstudio and how to make these changes via the Rstudio GUI on Windows.</p>
</div>
</section>
</section>
<section id="additional-steps-for-rabbitmq-message-passing">
<h2>Additional Steps for RabbitMQ Message Passing<a class="headerlink" href="#additional-steps-for-rabbitmq-message-passing" title="Permalink to this heading">¶</a></h2>
<p>RabbitMQ connections allow messages to be passed between models when the
models are not running on the same machine. To use these connections,
the framework you must install the <a class="reference external" href="https://pika.readthedocs.io/en/stable/">pika</a> Python package and have access to a
RabbitMQ server. If you have access to an existing RabbitMQ server,
the information for that server be provided via the yggdrasil
config file (See
<a class="reference internal" href="config.html#config-rst"><span class="std std-ref">Configuration Options</span></a> for information on setting
config options).</p>
<p>Starting a local RabbitMQ Server is also relatively easy. Details on
downloading, installing, and starting a RabbitMQ server can be found
<a class="reference external" href="https://www.rabbitmq.com/download.html">here</a>. The default values
for RabbitMQ related properties in the config file are set to the defaults
for starting a RabbitMQ server.</p>
</section>
<section id="additional-steps-for-opensimroot">
<h2>Additional Steps for OpenSimRoot<a class="headerlink" href="#additional-steps-for-opensimroot" title="Permalink to this heading">¶</a></h2>
<p>If you would like to use OpenSimRoot, you will need to install GNU make. If you are on Linux/Mac or used conda to install yggdrasil it is likely that it will already be installed (you can run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">--version</span></code> to check). If it is not installed, and you are using a Mac OS, you can install XCode and the command line developer tools to get make and several other GNU tools (see relavent section of <a class="reference external" href="https://cloudtechpoint.medium.com/how-to-install-command-line-tools-homebrew-in-macos-without-xcode-1b910742d923">this article</a>). If you are not on Mac, we recommend installing it via a package manager, e.g.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">brew</span> <span class="pre">install</span> <span class="pre">make</span></code> on Mac</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">make</span></code> on Linux</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">choco</span> <span class="pre">install</span> <span class="pre">make</span></code> on Windows</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="includeme.html" class="btn btn-neutral float-left" title="Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="getting_started.html" class="btn btn-neutral float-right" title="Getting started" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017, Meagan Lang, David Raila.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>