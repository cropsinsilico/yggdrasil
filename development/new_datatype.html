<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Defining New Datatypes &mdash; yggdrasil v1.10.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            yggdrasil
          </a>
              <div class="version">
                v1.10.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../includeme.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../formatted_io.html">Formatted I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server_client_io.html">Server/Client I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../autowrap.html">Autowrapping Model Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conditional_io.html">Conditional I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../transformed_io.html">Transformed I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../timesync_io.html">Timestep Synchronization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../yaml.html">YAML Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../config.html">Configuration Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../units.html">Units</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Command Line Interface (CLI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hpc.html">High Performance Computing (HPC)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../remote.html">Running Integrations as Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docker.html">Docker Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../c_format_strings.html">C-Style Format Strings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../threading.html">OpenMP Threading in Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/examples_toc.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/index.html">Advanced</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hackathon2018/index.html">Welcome to the 2018 Crops in Silico Hackathon!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hackathon2019/index.html">Welcome to the 2019 Crops in Silico Hackathon!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hackathon2021/index.html">Welcome to the 2021 Crops in Silico Hackathon!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">yggdrasil</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Defining New Datatypes</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/development/new_datatype.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="defining-new-datatypes">
<span id="new-datatype-rst"></span><h1>Defining New Datatypes<a class="headerlink" href="#defining-new-datatypes" title="Permalink to this heading">¶</a></h1>
<p>yggdrasil supports two methods for defining new datatypes, either by
creating an alias for a complex datatype expressed in terms of the existing
datatypes (as described <a class="reference internal" href="../advanced/datatypes.html#datatypes-rst"><span class="std std-ref">here</span></a>) or through a Python class.
Reguardless of the method used, the datatype will automatically be registered
and added to the metaschema.</p>
<section id="json-defined-datatypes">
<h2>JSON Defined Datatypes<a class="headerlink" href="#json-defined-datatypes" title="Permalink to this heading">¶</a></h2>
<p>To define a datatype in terms of the existing datatypes, developers can save
the schema defining the datatype to a .json file in the
yggdrasil/metaschema/datatypes/schemas directory. yggdrasil automatically
loads schemas found in that directory and creates metaschema type classes from
them. The created class’s name will be based on the ‘title’ field listed in
the schema. Schemas must have, at minimum, values for the ‘title’, ‘description’,
and ‘type’ metaschema properties and must be a valid schema (i.e. can be
validated using the <a class="reference internal" href="../advanced/metaschema.html#metaschema-rst"><span class="std std-ref">metaschema</span></a>.</p>
</section>
<section id="class-defined-datatypes">
<h2>Class Defined Datatypes<a class="headerlink" href="#class-defined-datatypes" title="Permalink to this heading">¶</a></h2>
<p>Class defined data types should subclass the
<code class="xref py py-class docutils literal notranslate"><span class="pre">yggdrasil.metaschema.datatypes.MetaschemaType.MetaschemaType</span></code> base.
The file containing the class definitions should reside in the
‘yggdrasil/metaschema/datatypes/’ directory.</p>
<p>At a minimum, classes for types defined in
such a manner must override the following method:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">encode_data</span></code>: Takes as input an object for encoding and a type definition
and returns the encoded object which is of a type that is encodable by the
standard JSON library.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">decode_data</span></code>: The reverse of <code class="docutils literal notranslate"><span class="pre">encode_data</span></code>. Takes as input an encoded
object and the associated type definitions and returns the decoded object.</p></li>
</ul>
<p>In addition, the behavior of types defined using classes are also
controlled by the following class attributes:</p>
<p>For class defined data types, developers should also develop tests for the
new data types using
<code class="xref py py-class docutils literal notranslate"><span class="pre">yggdrasil.metaschema.datatypes.tests.test_MetaschemaType.TestMetaschemaType</span></code>
as a base class. Generally, developers should be able to control the testing of
their class by specifying values for the following class attributes:</p>
</section>
<section id="class-defined-properties">
<h2>Class Defined Properties<a class="headerlink" href="#class-defined-properties" title="Permalink to this heading">¶</a></h2>
<p>yggdrasil also supports the addition of new metaschema properties by subclassing
the <code class="xref py py-class docutils literal notranslate"><span class="pre">yggdrasil.metaschema.properties.MetaschemaProperty.MetaschemaProperty</span></code>
The file containing the class definitions should reside in the
‘yggdrasil/metaschema/properties/’ directory.</p>
<p>At a minimum, classes for properties defined in
such a manner must override the following method:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">encode</span></code>: Takes as input an object for encoding and a type definition
and returns the value for the property describing the object.</p></li>
</ul>
<p>In addition, the behavior of properties are also
controlled by the following class attributes:</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017, Meagan Lang, David Raila.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>